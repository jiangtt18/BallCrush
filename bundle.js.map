{"version":3,"sources":["webpack:///webpack/bootstrap 989fe7fd4bee6bd1572d","webpack:///./lib/bubblecrush.js"],"names":["ctx","canvas","document","getElementById","getContext","bubbles","timeCount","moves","moveCount","score","animationMoveTime","images","rose","orange","lemon","orchard","lime","grapefruit","blue","againBtn","timeBtn","basicBtn","startPosX","startPosY","sound","bgm","background","body","getElementsByTagName","description","timerMode","setJS","fileName","ele","createElement","type","src","appendChild","setTimeout","style","display","initialize","Bubble","x","y","x1","y1","animationInterval","x2","y2","getY","setBubbleProp","colorIdx","moving","push","update","console","log","initBubbleBoard","initBubbleColor","initCanvas","setInterval","checkBubbleStatus","play","gameOver","clearRect","font","fillText","playbackRate","pause","length","i","filter","bubble","setRemoveMark","fall","draw","resetGame","clearInterval","currentTime","setHorizontalRemoveMark","setVerticalRemoveMark","currentColorIdx","numSameColor","nextColorIdx","remove","newIdx","getRandomNum","resetMark","playSound","n","Math","floor","random","hasStraight3colors","curBubble","bottomBubble","middleBubble","leftBubble","idx","drawImage","textAlign","sec","pressMouse","e","offsetX","offsetY","releaseMouse","oldX","oldY","endPosX","endPosY","newPos","calcNewPos","newX","newY","swapColorsAndPos","oldBubble","newBubble","oldColorIdx","xDistance","yDistance","abs","setCanvasStyle","onclick","countDown","foundcolor","randomIndex","onmousedown","onmouseup"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;AC7DA,IAAIA,GAAJ;AACA,IAAIC,SAASC,SAASC,cAAT,CAAwB,QAAxB,CAAb;AACAH,MAAMC,OAAOG,UAAP,CAAkB,IAAlB,CAAN;AACA,IAAMC,UAAU,EAAhB;AACA,IAAIC,SAAJ;AACA,IAAIC,QAAQ,EAAZ;AACA,IAAIC,YAAY,CAAhB;AACA,IAAIC,KAAJ;AACA,IAAIC,iBAAJ;AACA,IAAMC,SAAS,CAACC,IAAD,EAAOC,MAAP,EAAeC,KAAf,EAAsBC,OAAtB,EAA+BC,IAA/B,EAAqCC,UAArC,EAAiDC,IAAjD,CAAf;AACA,IAAIC,WAAWjB,SAASC,cAAT,CAAwB,UAAxB,CAAf;AACA,IAAIiB,UAAUlB,SAASC,cAAT,CAAwB,SAAxB,CAAd;AACA,IAAIkB,WAAWnB,SAASC,cAAT,CAAwB,UAAxB,CAAf;AACA,IAAImB,YAAY,IAAhB;AACA,IAAIC,YAAY,IAAhB;AACA,IAAIC,QAAQtB,SAASC,cAAT,CAAwB,OAAxB,CAAZ;AACA,IAAIsB,MAAMvB,SAASC,cAAT,CAAwB,KAAxB,CAAV;AACA,IAAIuB,aAAaxB,SAASC,cAAT,CAAwB,YAAxB,CAAjB;AACA,IAAIwB,OAAOzB,SAAS0B,oBAAT,CAA8B,MAA9B,CAAX;AACA,IAAIC,cAAc3B,SAASC,cAAT,CAAwB,aAAxB,CAAlB;AACA,IAAI2B,YAAY,KAAhB;;AAGA,SAASC,KAAT,CAAeC,QAAf,EAAyB;AACvB,MAAIC,MAAM/B,SAASgC,aAAT,CAAuB,QAAvB,CAAV;AACAD,MAAIE,IAAJ,GAAW,iBAAX;AACAF,MAAIG,GAAJ,GAAUJ,QAAV;AACA9B,WAASyB,IAAT,CAAcU,WAAd,CAA0BJ,GAA1B;;AAEAK,aAAW,YAAW;AACpBjB,aAASkB,KAAT,CAAeC,OAAf,GAAyB,MAAzB;AACApB,YAAQmB,KAAR,CAAcC,OAAd,GAAwB,MAAxB;AACAX,gBAAYU,KAAZ,CAAkBC,OAAlB,GAA2B,MAA3B;AACAC;AACD,GALD,EAKG,GALH;AAMD;;AAGD,SAASC,MAAT,CAAgBC,CAAhB,EAAmBC,CAAnB,EAAsB;AACpB;AACA,OAAKC,EAAL,GAAUF,CAAV;AACA,OAAKG,EAAL,GAAUF,CAAV;AACA,OAAKG,iBAAL,GAAyB,CAAzB;;AAEA,OAAKC,EAAL,GAAUL,CAAV;AACA,OAAKM,EAAL,GAAUL,CAAV;;AAEA,OAAKM,IAAL,GAAY,YAAU;AACpB;AACA,WAAO,CAAC,KAAKJ,EAAL,GAAU,CAAC,KAAKG,EAAL,GAAQ,KAAKH,EAAd,IAAqB,KAAKC,iBAA1B,GAA6C,EAAxD,IAA8D,EAA9D,GAAmE,GAA1E;AAED,GAJD;;AAMA,OAAKI,aAAL,GAAqB,UAAUH,EAAV,EAAcC,EAAd,EAAkBG,QAAlB,EAA2B;AAC9C,SAAKJ,EAAL,GAAUA,EAAV;AACA,SAAKC,EAAL,GAAUA,EAAV;AACA,SAAKG,QAAL,GAAgBA,QAAhB;AACA,SAAKC,MAAL,GAAc,IAAd;AACA,SAAKN,iBAAL,GAAyB,EAAzB,CAL8C,CAKlB;AAC5BxC,UAAM+C,IAAN,CAAW,IAAX;AACD,GAPD;;AASA,OAAKC,MAAL,GAAc,YAAU;AACtB,SAAKR,iBAAL;AACAS,YAAQC,GAAR,CAAY,KAAKV,iBAAjB;AACA,QAAG,KAAKA,iBAAL,IAA0B,CAA7B,EAAgC;AAC9B,WAAKM,MAAL,GAAc,KAAd;AACD;AACF,GAND;AAQD;;AAID,SAASZ,UAAT,GAAqB;AACnB;AACAjC,cAAY,GAAZ;AACA,MAAIsB,SAAJ,EAAc;AACdxB,gBAAY,KAAK,IAAjB;AACC;;AAEDG,UAAQ,CAAR;AACAiD;AACAC;AACAC;AACA;AACAlD,sBAAoBmD,YAAYC,iBAAZ,EAA+B,EAA/B,CAApB,CAZmB,CAYoC;AACvD;AACArC,MAAIsC,IAAJ;AACAP,UAAQC,GAAR,CAAY/C,iBAAZ;AACD;;AAMC,SAASsD,QAAT,GAAmB;AACjBhE,MAAIiE,SAAJ,CAAc,CAAd,EAAgB,CAAhB,EAAkB,GAAlB,EAAsB,GAAtB;AACA9C,WAASoB,KAAT,CAAeC,OAAf,GAAyB,QAAzB;AACAxC,MAAIkE,IAAJ,GAAW,qBAAX;AACAlE,MAAImE,QAAJ,CAAa,YAAY1D,KAAzB,EAAgC,GAAhC,EAAoC,GAApC;AACD;;AAED,SAASqD,iBAAT,GAA4B;AAC1B,MAAGhC,SAAH,EAAa;AACXxB,iBAAa,EAAb;AACA,QAAImB,IAAI2C,YAAJ,IAAoB,CAApB,IAAyB9D,YAAY,IAAzC,EAA+C;AAC3CmB,UAAI4C,KAAJ;AACA5C,UAAI2C,YAAJ,GAAmB,GAAnB;AACA3C,UAAIsC,IAAJ;AACH;AACF;;AAEC,MAAGxD,MAAM+D,MAAN,GAAe,CAAlB,EAAoB;AACjBd,YAAQC,GAAR,CAAYlD,KAAZ;AACD,SAAI,IAAIgE,IAAI,CAAZ,EAAeA,IAAIhE,MAAM+D,MAAzB,EAAiCC,GAAjC,EAAqC;AACnC;AACAhE,YAAMgE,CAAN,EAAShB,MAAT;AACD;;AAEDhD,YAAQA,MAAMiE,MAAN,CACN,UAASC,MAAT,EAAiB;AACf,aAAOA,OAAO1B,iBAAP,IAA4B,CAAnC;AACD,KAHK,CAAR;;AAMA,QAAGxC,MAAM+D,MAAN,IAAgB,CAAnB,EAAsB;AACpBI;AACAC;AACD;AACF;AACCC;AACA,MAAG9C,SAAH,EAAc;AACd,QAAGvB,MAAM+D,MAAN,IAAgB,CAAhB,IAAqBhE,aAAa,CAArC,EAAwC;AACtCuE;AACD;AACF,GAJC,MAIK;AACL,QAAGtE,MAAM+D,MAAN,IAAgB,CAAhB,IAAqB9D,aAAa,CAArC,EAAwC;AACtCqE;AACD;AACF;AACJ;;AAED,SAASA,SAAT,GAAoB;AAClBC,gBAAcpE,iBAAd;AACAA,sBAAoB,IAApB;AACAe,MAAI4C,KAAJ;AACA5C,MAAIsD,WAAJ,GAAkB,CAAlB;AACAzC,aAAW0B,QAAX,EAAqB,GAArB;AACA;AACD;;AAGD,SAASU,aAAT,GAAwB;AACtBM;AACAC;AAED;;AAED,SAASD,uBAAT,GAAkC;AAChC,OAAI,IAAIrC,IAAI,CAAZ,EAAeA,IAAI,CAAnB,EAAsBA,GAAtB,EAA0B;AACxB,QAAIuC,kBAAkB7E,QAAQsC,CAAR,EAAW,CAAX,EAAcS,QAApC;AACA,QAAI+B,eAAe,CAAnB;AACA,SAAI,IAAIvC,IAAI,CAAZ,EAAeA,IAAI,CAAnB,EAAsBA,GAAtB,EAA2B;AACzB,UAAIwC,eAAe/E,QAAQsC,CAAR,EAAWC,CAAX,EAAcQ,QAAjC;AACA,UAAG8B,mBAAmBE,YAAtB,EAAoC;AAClCD;AACA,YAAKA,gBAAgB,CAArB,EAAuB;AACrB9E,kBAAQsC,CAAR,EAAWC,IAAE,CAAb,EAAgByC,MAAhB,GAAyB,IAAzB;AACAhF,kBAAQsC,CAAR,EAAWC,IAAE,CAAb,EAAgByC,MAAhB,GAAyB,IAAzB;AACAhF,kBAAQsC,CAAR,EAAWC,CAAX,EAAcyC,MAAd,GAAuB,IAAvB;AACD;AACF,OAPD,MAOO;AACLH,0BAAkBE,YAAlB;AACAD,uBAAe,CAAf;AACD;AACF;AACF;AACF;;AAED,SAASF,qBAAT,GAAgC;AAC9B,OAAI,IAAIrC,IAAI,CAAZ,EAAeA,IAAI,CAAnB,EAAsBA,GAAtB,EAA0B;AACxB,QAAIsC,kBAAkB7E,QAAQ,CAAR,EAAWuC,CAAX,EAAcQ,QAApC;AACA,QAAI+B,eAAe,CAAnB;AACA,SAAI,IAAIxC,IAAI,CAAZ,EAAeA,IAAI,CAAnB,EAAsBA,GAAtB,EAA0B;AACxB,UAAIyC,eAAe/E,QAAQsC,CAAR,EAAWC,CAAX,EAAcQ,QAAjC;AACA,UAAG8B,mBAAmBE,YAAtB,EAAoC;AAClCD;AACA,YAAGA,gBAAgB,CAAnB,EAAqB;AACnB9E,kBAAQsC,IAAE,CAAV,EAAaC,CAAb,EAAgByC,MAAhB,GAAyB,IAAzB;AACAhF,kBAAQsC,IAAE,CAAV,EAAaC,CAAb,EAAgByC,MAAhB,GAAyB,IAAzB;AACAhF,kBAAQsC,CAAR,EAAWC,CAAX,EAAcyC,MAAd,GAAuB,IAAvB;AACD;AACF,OAPD,MAOO;AACLH,0BAAkBE,YAAlB;AACAD,uBAAe,CAAf;AACD;AACF;AACF;AACF;;AAOD,SAASR,IAAT,GAAe;AACb,OAAI,IAAIhC,IAAI,CAAZ,EAAeA,IAAI,CAAnB,EAAsBA,GAAtB,EAA0B;AACxB,SAAI,IAAIC,IAAI,CAAR,EAAW0C,SAAS,CAAxB,EAA2B1C,KAAK,CAAhC,EAAmCA,KAAK0C,QAAxC,EAAiD;AAC/C,aAAOA,UAAU,CAAjB,EAAmB;AACjB,YAAIjF,QAAQsC,CAAR,EAAW2C,MAAX,EAAmBD,MAAvB,EAA8B;AAC5BC;AACD,SAFD,MAEO;AACL;AACD;AACF;;AAED,UAAG1C,KAAK0C,MAAR,EAAgB;AACd,YAAIlC,WAAYkC,UAAU,CAAX,GAAgBjF,QAAQsC,CAAR,EAAW2C,MAAX,EAAmBlC,QAAnC,GAA8CmC,aAAa,CAAb,CAA7D;AACAlF,gBAAQsC,CAAR,EAAWC,CAAX,EAAcO,aAAd,CAA4BR,CAA5B,EAA8B2C,MAA9B,EAAqClC,QAArC;AACD;AACF;AACF;;AAEDoC;AACD;;AAGD,SAASA,SAAT,GAAoB;AAClB,MAAIC,YAAY,IAAhB;AACA,OAAI,IAAI9C,IAAI,CAAZ,EAAeA,IAAI,CAAnB,EAAsBA,GAAtB,EAA0B;AACxB,SAAI,IAAIC,IAAI,CAAZ,EAAeA,IAAI,CAAnB,EAAsBA,GAAtB,EAA2B;AACzB,UAAGvC,QAAQsC,CAAR,EAAWC,CAAX,EAAcyC,MAAjB,EAAwB;AACtBhF,gBAAQsC,CAAR,EAAWC,CAAX,EAAcyC,MAAd,GAAuB,KAAvB;AACA5E,iBAAS,GAAT;AACA,YAAGgF,SAAH,EAAa;AACXjE,gBAAM6C,KAAN;AACA7C,gBAAMuD,WAAN,GAAoB,CAApB;AACAvD,gBAAMuC,IAAN;AACA0B,sBAAY,KAAZ;AACD;AACF;AACF;AACF;AACF;;AAED,SAASF,YAAT,CAAsBG,CAAtB,EAAwB;AACtB,SAAQC,KAAKC,KAAL,CAAWD,KAAKE,MAAL,KAAgBH,CAA3B,CAAR;AACD;;AAED,SAASI,kBAAT,CAA4BnD,CAA5B,EAA8BC,CAA9B,EAAgCmD,SAAhC,EAA0C;AACxC,MAAID,qBAAqB,KAAzB;AACA,MAAGlD,IAAI,CAAP,EAAU;AACR,QAAIoD,eAAe3F,QAAQsC,CAAR,EAAWC,IAAE,CAAb,EAAgBQ,QAAnC;AACA,QAAI6C,eAAe5F,QAAQsC,CAAR,EAAWC,IAAE,CAAb,EAAgBQ,QAAnC;AACA,QAAG4C,gBAAgBC,YAAhB,IAAgCA,gBAAgBF,SAAnD,EAA6D;AAC3DD,2BAAqB,IAArB;AACD;AACF;;AAED,MAAGnD,IAAI,CAAP,EAAU;AACR,QAAIuD,aAAa7F,QAAQsC,IAAE,CAAV,EAAaC,CAAb,EAAgBQ,QAAjC;AACA,QAAI6C,gBAAe5F,QAAQsC,IAAE,CAAV,EAAaC,CAAb,EAAgBQ,QAAnC;AACA,QAAI8C,cAAcD,aAAd,IAA8BA,iBAAgBF,SAAlD,EAA4D;AAC1DD,2BAAqB,IAArB;AACD;AACF;;AAED,SAAOA,kBAAP;AACD;;AAID,SAASlB,IAAT,GAAgB;AACd5E,MAAIiE,SAAJ,CAAc,CAAd,EAAgB,CAAhB,EAAkB,GAAlB,EAAsB,GAAtB;AACA,OAAI,IAAItB,IAAI,CAAZ,EAAeA,IAAI,CAAnB,EAAsBA,GAAtB,EAA4B;AAC1B,SAAI,IAAIC,IAAI,CAAZ,EAAeA,IAAI,CAAnB,EAAsBA,GAAtB,EAA4B;AAC1B,UAAIuD,MAAM9F,QAAQsC,CAAR,EAAWC,CAAX,EAAcQ,QAAxB;AACApD,UAAIoG,SAAJ,CAAczF,OAAOwF,GAAP,CAAd,EACAxD,IAAI,EAAJ,GAAS,CADT,EACYtC,QAAQsC,CAAR,EAAWC,CAAX,EAAcM,IAAd,EADZ,EACkC,EADlC,EACsC,EADtC;AAED;AACF;;AAEDlD,MAAIkE,IAAJ,GAAW,qBAAX;AACAlE,MAAIqG,SAAJ,GAAgB,QAAhB;AACA,MAAGvE,SAAH,EAAc;AACd,QAAIwE,MAAMX,KAAKC,KAAL,CAAWtF,YAAY,IAAvB,CAAV;AACA;;AAEA,QAAIgG,MAAM,CAAV,EAAa;AACTA,YAAM,IAAN;AACH,KAFD,MAEO,IAAIA,MAAM,EAAV,EAAc;AACjBA,YAAM,MAAMA,GAAZ;AACH;;AAED;;AAEAtG,QAAImE,QAAJ,CAAa,iBAAiBmC,GAA9B,EAAmC,GAAnC,EAAwC,EAAxC;AACD,GAbC,MAaK;AACLtG,QAAImE,QAAJ,CAAa,gBAAe3D,SAA5B,EAAuC,GAAvC,EAA4C,EAA5C;AAED;;AAEDR,MAAImE,QAAJ,CAAa,YAAY1D,KAAzB,EAAgC,GAAhC,EAAqC,EAArC;AAEC;;AAED,SAAS8F,UAAT,CAAoBC,CAApB,EAAuB;AACrBlF,cAAYkF,EAAEC,OAAd;AACAlF,cAAYiF,EAAEE,OAAd;AACA;AACA;AACD;;AAED,SAASC,YAAT,CAAsBH,CAAtB,EAAwB;AACtB,MAAII,OAAOjB,KAAKC,KAAL,CAAWtE,YAAY,EAAvB,CAAX;AACA,MAAIuF,OAAOlB,KAAKC,KAAL,CAAW,CAACrE,YAAY,GAAb,IAAoB,EAA/B,CAAX;AACA;AACA;AACA,MAAIuF,UAAUN,EAAEC,OAAhB;AACA,MAAIM,UAAUP,EAAEE,OAAhB;AACA,MAAIM,SAASC,WAAW3F,SAAX,EAAsBwF,OAAtB,EAA+BvF,SAA/B,EAA0CwF,OAA1C,EAAmDH,IAAnD,EAAyDC,IAAzD,CAAb;AACA,MAAIK,OAAOF,OAAO,CAAP,CAAX;AACA,MAAIG,OAAOH,OAAO,CAAP,CAAX;AACA;AACA;AACA;AACA;AACA,MAAG3G,QAAQuG,IAAR,EAAcC,IAAd,EAAoBxD,MAApB,IAA8BhD,QAAQ6G,IAAR,EAAcC,IAAd,EAAoB9D,MAAlD,IAA4D3C,qBAAqB,IAApF,EAA0F;AACxF;AACA;AACD;AACD0G,mBAAiBR,IAAjB,EAAuBC,IAAvB,EAA6BK,IAA7B,EAAmCC,IAAnC,EAlBsB,CAkBoB;AAC1C3G;AACAoE;AACD;;AAED,SAASwC,gBAAT,CAA0BR,IAA1B,EAAgCC,IAAhC,EAAsCK,IAAtC,EAA4CC,IAA5C,EAAiD;AAC/C,MAAIE,YAAYhH,QAAQuG,IAAR,EAAcC,IAAd,CAAhB;AACA,MAAIS,YAAYjH,QAAQ6G,IAAR,EAAcC,IAAd,CAAhB;AACA,MAAII,cAAcF,UAAUjE,QAA5B;AACAiE,YAAUlE,aAAV,CAAwB+D,IAAxB,EAA8BC,IAA9B,EAAoCG,UAAUlE,QAA9C;AACAkE,YAAUnE,aAAV,CAAwByD,IAAxB,EAA8BC,IAA9B,EAAoCU,WAApC;AAED;;AAED,SAASN,UAAT,CAAqB3F,SAArB,EAAgCwF,OAAhC,EAAyCvF,SAAzC,EAAoDwF,OAApD,EAA6DH,IAA7D,EAAmEC,IAAnE,EAAyE;AACvE,MAAIW,YAAYV,UAAUxF,SAA1B;AACA,MAAImG,YAAYV,UAAUxF,SAA1B;AACA,MAAIoB,IAAIiE,IAAR;AACA,MAAIhE,IAAIiE,IAAR;AACA,MAAGlB,KAAK+B,GAAL,CAASF,SAAT,KAAuB,CAAvB,IAA4B7B,KAAK+B,GAAL,CAASD,SAAT,KAAuB,CAAtD,EAAwD;AACtD;AACD,GAFD,MAEO,IAAI9B,KAAK+B,GAAL,CAASZ,UAAUxF,SAAnB,IAAgCqE,KAAK+B,GAAL,CAASD,SAAT,CAApC,EAAyD;AAC9D9E,SAAM6E,YAAY,CAAb,GAAkB,CAAlB,GAAsB,CAAC,CAA5B;AACD,GAFM,MAEA;AACL5E,SAAM6E,YAAY,CAAb,GAAkB,CAAlB,GAAsB,CAAC,CAA5B;AACD;AACD,SAAO,CAAC9E,CAAD,EAAGC,CAAH,CAAP;AACD;AACD,SAAS+E,cAAT,GAA0B;AACxB;AACA;AACA;AACA;;AAED;AACDtG,SAASuG,OAAT,GAAmB,YAAU;AAC3B7F,QAAM,EAAN;;AAEA4F;AACD,CAJD;;AAMA,IAAIE,YAAY3H,SAASC,cAAT,CAAwB,WAAxB,CAAhB;AACAiB,QAAQwG,OAAR,GAAkB,YAAU;AAC1B7F,QAAM,oBAAN;AACAD,cAAY,IAAZ;AACA;AACA;AACA6F;AACD,CAND;;AASA;;;AAGF;AACA;;AAEM,SAASjE,eAAT,GAA0B;AACxB,OAAI,IAAIf,IAAI,CAAZ,EAAeA,IAAI,CAAnB,EAAsBA,GAAtB,EAA2B;AACzBtC,YAAQsC,CAAR,IAAa,EAAb;AACA,SAAI,IAAIC,IAAI,CAAZ,EAAeA,IAAI,CAAnB,EAAsBA,GAAtB,EAA2B;AACzBvC,cAAQsC,CAAR,EAAWC,CAAX,IAAgB,IAAIF,MAAJ,CAAWC,CAAX,EAAcC,CAAd,CAAhB;AACD;AACF;AACF;;AAED,SAASe,eAAT,GAA0B;AACxB,OAAI,IAAIhB,IAAI,CAAZ,EAAeA,IAAI,CAAnB,EAAsBA,GAAtB,EAA2B;AACzB,SAAI,IAAIC,IAAI,CAAZ,EAAeA,IAAI,CAAnB,EAAsBA,GAAtB,EAA2B;AACzB,UAAIkF,aAAa,KAAjB;AACA,aAAM,CAACA,UAAP,EAAkB;AAChBA,qBAAa,KAAb;AACA,YAAIC,cAAcxC,aAAa,CAAb,CAAlB;AACA,YAAG,CAACO,mBAAmBnD,CAAnB,EAAsBC,CAAtB,EAAyBmF,WAAzB,CAAJ,EAA0C;AACxC1H,kBAAQsC,CAAR,EAAWC,CAAX,EAAcQ,QAAd,GAAyB2E,WAAzB;AACAD,uBAAa,IAAb;AACD;AACF;AACF;AACF;AACF;;AAEC,SAASlE,UAAT,GAAqB;AACnB3D,SAAO+H,WAAP,GAAqBzB,UAArB;AACAtG,SAAOgI,SAAP,GAAmBtB,YAAnB;AACD,C","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 989fe7fd4bee6bd1572d","var ctx;\nlet canvas = document.getElementById('canvas');\nctx = canvas.getContext('2d');\nconst bubbles = [];\nvar timeCount;\nvar moves = [];\nvar moveCount = 0;\nvar score;\nvar animationMoveTime;\nconst images = [rose, orange, lemon, orchard, lime, grapefruit, blue];\nvar againBtn = document.getElementById('againBtn');\nvar timeBtn = document.getElementById('timeBtn');\nvar basicBtn = document.getElementById('basicBtn');\nvar startPosX = null;\nvar startPosY = null;\nvar sound = document.getElementById('sound');\nvar bgm = document.getElementById('bgm');\nvar background = document.getElementById('background');\nvar body = document.getElementsByTagName('BODY');\nvar description = document.getElementById('description');\nvar timerMode = false;\n\n\nfunction setJS(fileName) {\n  var ele = document.createElement('script');\n  ele.type = 'text/javascript';\n  ele.src = fileName;\n  document.body.appendChild(ele);\n\n  setTimeout(function() {\n    basicBtn.style.display = 'none';\n    timeBtn.style.display = 'none';\n    description.style.display= 'none';\n    initialize();\n  }, 200);\n}\n\n\nfunction Bubble(x, y) {\n  // assign bubble\n  this.x1 = x;\n  this.y1 = y;\n  this.animationInterval = 0;\n\n  this.x2 = x;\n  this.y2 = y;\n\n  this.getY = function(){\n    // move the fruit gradually\n    return (this.y1 + (this.y2-this.y1) * (this.animationInterval)/25) * 60 + 100;\n\n  };\n\n  this.setBubbleProp = function (x2, y2, colorIdx){\n    this.x2 = x2;\n    this.y2 = y2;\n    this.colorIdx = colorIdx;\n    this.moving = true;\n    this.animationInterval = 25;// cnotrol the time between drop and swap\n    moves.push(this);\n  };\n\n  this.update = function(){\n    this.animationInterval--;\n    console.log(this.animationInterval);\n    if(this.animationInterval <= 0) {\n      this.moving = false;\n    }\n  };\n\n}\n\n\n\nfunction initialize(){\n  // startBtn.style.display = 'none';\n  moveCount = 100;\n  if (timerMode){\n  timeCount = 10 * 1000;\n  }\n\n  score = 0;\n  initBubbleBoard();\n  initBubbleColor();\n  initCanvas();\n  // debugger;\n  animationMoveTime = setInterval(checkBubbleStatus, 25);//swapping motion time\n  // call continuesly . will always run down from 25 animationInteval. but will control the run down speed\n  bgm.play();\n  console.log(animationMoveTime)\n}\n\n\n\n\n\n  function gameOver(){\n    ctx.clearRect(0,0,600,700);\n    againBtn.style.display = 'inline';\n    ctx.font = 'bold 30px Open Sans';\n    ctx.fillText('Score: ' + score, 300,250);\n  }\n\n  function checkBubbleStatus(){\n    if(timerMode){\n      timeCount -= 25;\n      if (bgm.playbackRate == 1 && timeCount < 5000) {\n          bgm.pause();\n          bgm.playbackRate = 1.5;\n          bgm.play();\n      }\n    }\n\n      if(moves.length > 0){\n         console.log(moves);\n        for(let i = 0; i < moves.length; i++){\n          // debugger;\n          moves[i].update()\n        }\n\n        moves = moves.filter(\n          function(bubble) {\n            return bubble.animationInterval != 0;\n          }\n        );\n\n        if(moves.length == 0) {\n          setRemoveMark();\n          fall();\n        }\n      }\n        draw();\n        if(timerMode) {\n        if(moves.length == 0 && timeCount <= 0) {\n          resetGame();\n        }\n      } else {\n        if(moves.length == 0 && moveCount == 0) {\n          resetGame();\n        }\n      }\n  }\n\n  function resetGame(){\n    clearInterval(animationMoveTime);\n    animationMoveTime = null;\n    bgm.pause();\n    bgm.currentTime = 0;\n    setTimeout(gameOver, 500)\n    // gameOver();\n  }\n\n\n  function setRemoveMark(){\n    setHorizontalRemoveMark();\n    setVerticalRemoveMark();\n\n  }\n\n  function setHorizontalRemoveMark(){\n    for(let x = 0; x < 8; x++){\n      let currentColorIdx = bubbles[x][0].colorIdx;\n      let numSameColor = 1;\n      for(let y = 1; y < 8; y ++){\n        let nextColorIdx = bubbles[x][y].colorIdx;\n        if(currentColorIdx == nextColorIdx) {\n          numSameColor ++;\n          if ( numSameColor >= 3){\n            bubbles[x][y-2].remove = true\n            bubbles[x][y-1].remove = true\n            bubbles[x][y].remove = true\n          }\n        } else {\n          currentColorIdx = nextColorIdx;\n          numSameColor = 1;\n        }\n      }\n    }\n  }\n\n  function setVerticalRemoveMark(){\n    for(let y = 0; y < 8; y++){\n      let currentColorIdx = bubbles[0][y].colorIdx;\n      var numSameColor = 1;\n      for(let x = 1; x < 8; x++){\n        let nextColorIdx = bubbles[x][y].colorIdx;\n        if(currentColorIdx == nextColorIdx) {\n          numSameColor++;\n          if(numSameColor >= 3){\n            bubbles[x-2][y].remove = true;\n            bubbles[x-1][y].remove = true;\n            bubbles[x][y].remove = true;\n          }\n        } else {\n          currentColorIdx = nextColorIdx;\n          numSameColor = 1;\n        }\n      }\n    }\n  }\n\n\n\n\n\n\n  function fall(){\n    for(let x = 0; x < 8; x++){\n      for(let y = 7, newIdx = 7; y >= 0; y--, newIdx--){\n        while (newIdx >= 0){\n          if (bubbles[x][newIdx].remove){\n            newIdx--;\n          } else {\n            break;\n          }\n        }\n\n        if(y != newIdx) {\n          var colorIdx = (newIdx >= 0) ? bubbles[x][newIdx].colorIdx : getRandomNum(6);\n          bubbles[x][y].setBubbleProp(x,newIdx,colorIdx);\n        }\n      }\n    }\n\n    resetMark();\n  }\n\n\n  function resetMark(){\n    let playSound = true;\n    for(let x = 0; x < 8; x++){\n      for(let y = 0; y < 8; y++) {\n        if(bubbles[x][y].remove){\n          bubbles[x][y].remove = false;\n          score += 100;\n          if(playSound){\n            sound.pause();\n            sound.currentTime = 0;\n            sound.play();\n            playSound = false;\n          }\n        }\n      }\n    }\n  }\n\n  function getRandomNum(n){\n    return  Math.floor(Math.random() * n);\n  }\n\n  function hasStraight3colors(x,y,curBubble){\n    let hasStraight3colors = false;\n    if(y > 1) {\n      let bottomBubble = bubbles[x][y-2].colorIdx;\n      let middleBubble = bubbles[x][y-1].colorIdx;\n      if(bottomBubble == middleBubble && middleBubble == curBubble){\n        hasStraight3colors = true;\n      }\n    }\n\n    if(x > 1) {\n      let leftBubble = bubbles[x-2][y].colorIdx;\n      let middleBubble = bubbles[x-1][y].colorIdx;\n      if (leftBubble == middleBubble && middleBubble == curBubble){\n        hasStraight3colors = true;\n      }\n    }\n\n    return hasStraight3colors;\n  }\n\n\n\n  function draw() {\n    ctx.clearRect(0,0,600,700);\n    for(let x = 0; x < 8; x ++) {\n      for(let y = 0; y < 8; y ++) {\n        let idx = bubbles[x][y].colorIdx\n        ctx.drawImage(images[idx],\n        x * 60 + 8, bubbles[x][y].getY(), 40, 40)\n      }\n    }\n\n    ctx.font = 'bold 20px Open Sans';\n    ctx.textAlign = 'center';\n    if(timerMode) {\n    var sec = Math.floor(timeCount / 1000);\n    // var mSec = timeCount % 100;\n\n    if (sec < 0) {\n        sec = '00';\n    } else if (sec < 10) {\n        sec = '0' + sec;\n    }\n\n    // if (mSec < 0) mSec = '00';\n\n    ctx.fillText('Time Left : ' + sec, 150, 50);\n  } else {\n    ctx.fillText('Moves Left:'+ moveCount, 150, 50);\n\n  }\n\n  ctx.fillText('Score :' + score, 450, 50);\n\n  }\n\n  function pressMouse(e) {\n    startPosX = e.offsetX;\n    startPosY = e.offsetY;\n    // console.log('dX:' + startPosX);\n    // console.log('dY:' + startPosY);\n  }\n\n  function releaseMouse(e){\n    let oldX = Math.floor(startPosX / 60);\n    let oldY = Math.floor((startPosY - 100) / 60);\n    // console.log('bubbleX:' + oldX);\n    // console.log('bubbleY:' + oldY);\n    let endPosX = e.offsetX;\n    let endPosY = e.offsetY;\n    let newPos = calcNewPos(startPosX, endPosX, startPosY, endPosY, oldX, oldY);\n    let newX = newPos[0];\n    let newY = newPos[1];\n    //\n    // console.log('bubbleX:' + newX);\n    // console.log('bubbleY:' + newY);\n    // debugger;\n    if(bubbles[oldX][oldY].moving || bubbles[newX][newY].moving || animationMoveTime == null) {\n      // let it drops\n      return\n    }\n    swapColorsAndPos(oldX, oldY, newX, newY); // drop to the ideal position. stops.\n    moveCount--;\n    draw();\n  }\n\n  function swapColorsAndPos(oldX, oldY, newX, newY){\n    let oldBubble = bubbles[oldX][oldY];\n    let newBubble = bubbles[newX][newY];\n    let oldColorIdx = oldBubble.colorIdx;\n    oldBubble.setBubbleProp(newX, newY, newBubble.colorIdx);\n    newBubble.setBubbleProp(oldX, oldY, oldColorIdx);\n\n  }\n\n  function calcNewPos (startPosX, endPosX, startPosY, endPosY, oldX, oldY) {\n    let xDistance = endPosX - startPosX;\n    let yDistance = endPosY - startPosY;\n    let x = oldX;\n    let y = oldY;\n    if(Math.abs(xDistance) == 0 && Math.abs(yDistance) == 0){\n      return;\n    } else if (Math.abs(endPosX - startPosX) > Math.abs(yDistance)) {\n      x += (xDistance > 0) ? 1 : -1;\n    } else {\n      y += (yDistance > 0) ? 1 : -1;\n    }\n    return [x,y];\n  }\n  function setCanvasStyle() {\n    // canvas.style.border = \"5px solid rgb(255, 77, 136)\";\n    // canvas.style.borderRadius =  '50px';\n    // document.getElementById('bg').style.width = '50%';\n    // document.getElementById('bg').style.backgroundImage ='url(\"lib/images/gameBackground.png\")';\n\n  }\n  basicBtn.onclick = function(){\n    setJS('');\n\n    setCanvasStyle();\n  };\n\n  var countDown = document.getElementById('countDown');\n  timeBtn.onclick = function(){\n    setJS('./lib/timeTrial.js');\n    timerMode = true;\n    // countDown.style.display = 'block';\n    // ctx.fillText('Time Left : ' , 80, 50);\n    setCanvasStyle();\n  };\n\n\n  // mod dule.export = 'basic';\n\n\n// **********************************************************\n// help method starts here\n\n      function initBubbleBoard(){\n        for(let x = 0; x < 8; x++) {\n          bubbles[x] = [];\n          for(let y = 0; y < 8; y++) {\n            bubbles[x][y] = new Bubble(x, y);\n          }\n        }\n      }\n\n      function initBubbleColor(){\n        for(let x = 0; x < 8; x ++){\n          for(let y = 0; y < 8; y ++){\n            let foundcolor = false;\n            while(!foundcolor){\n              foundcolor = false;\n              let randomIndex = getRandomNum(6);\n              if(!hasStraight3colors(x, y, randomIndex)){\n                bubbles[x][y].colorIdx = randomIndex;\n                foundcolor = true;\n              }\n            }\n          }\n        }\n      }\n\n        function initCanvas(){\n          canvas.onmousedown = pressMouse;\n          canvas.onmouseup = releaseMouse;\n        }\n\n\n\n// WEBPACK FOOTER //\n// ./lib/bubblecrush.js"],"sourceRoot":""}